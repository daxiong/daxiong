<!DOCTYPE html>
<html>
    <head>
<!-- 手机端页面 -->
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>stou's Blog</title>
<meta name="viewport" content="width=device-width">
<meta name="description" content="PHP,Python,Golang,Linux">
<link rel="canonical" href="https://stou.info/">
<!-- Custom CSS -->
<link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/github.css">
    <link rel="stylesheet" href="/css/pygments.css">
<!-- 返回顶部 -->
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<script src="/js/jquery.js"></script>
<!--  -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-79992527-1', 'auto');
ga('send', 'pageview');
</script>
</head>

    <body  data-spy="scroll" data-target=".toc" data-offset="20">
        <header class="site-header">
    <div class="wrap">
        <a class="site-title" href="/"><h1><strong> <font
                        style="color:#39B3D7">s</font><font
                        style="color:#ED9C28">t</font><font
                        style="color:#47A447">o</font><font
                        style="color:#D9534F">u</font><font
                        style="color:#3276B1">.</font>
                     </strong>       </h1></a>
        <nav class="site-nav">
            <a href="#" class="menu-icon">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
                    <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
                    h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
                    h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
                    c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </a>
            <div class="trigger">
                
                
                <a class="page-link" href="/about/">About</a>
                
                
                
                <a class="page-link" href="/archive/">Archive</a>
                
                
                
                <a class="page-link" href="/categories/">Categories</a>
                
                
                
                <a class="page-link" href="/tags/">Tags</a>
                
                
                
                <a class="page-link" href="/atom.xml">Rss</a>
                
                
            </div>
        </nav>
    </div>
</header>

        <div class="page-content">
            <div class="wrap">
                <div class="home">
  
  <header class="post-header">
    <h1><a href="/2018/03/20/sg-platform-design.html">新加坡海外平台搭建实践</a></h1>
    <p class="meta"><i class="fa fa-calendar"></i> 2018-03-20&nbsp&nbsp&nbsp<i class="fa fa-folder-open"></i>&nbsp&nbsp&nbsp<i class="fa fa-tags"></i>&nbsp</p>
  </header>
  <article class="post-content">
  <ul>
<li>目录
{:toc}</li>
</ul>

<h3 id=">机遇和背景</h3>

<p>2017年初，我们团队刚好参与完成当前项目的大升级，而项目也正好进入盈利期。在修完年假后，我回到公司就正式加入了这个项目。项目在几个月前就隐约了解到一些，不过信息不太全，团队在经历从PHP到JAVA、NODEJS代替PHP的转型以后，也期待早点投入新项目中。</p>

<p>这个时间点，也正好是公司架构调整期，我们团队8人，刚好全部进入这个项目组。</p>

<h3 id=">技术选型</h3>

<p>由于考虑到新加坡法律法规与中国比较大的差异，以及差异化运营的需求，在做技术方案时，q我们面临几个选择：</p>

<ul>
<li>1）基于现有平台架构，进行平行精简化移植</li>
<li>2）从0开始搭建平台</li>
</ul>

<p>方案一可以充分利用平台现有资源和经验，但是现有系统复杂度高，梳理和精简化工作量大，方案二可以允许考虑新加坡市场的特殊性，DIY性更强，但当时考虑无法较好的利用现有平台的优秀经验，存在重复造轮子的情况。最终，<strong>我们选择了使用方案一进行</strong>，在新机房里重新部署一份平台并进行业务规则调整。</p>

<p>新加坡网络运营商比较多，M1,StartHub,SingTel为主导，还有很多比较小型的运营商，如LGA、myRepublic、pacificInternet等，类似中国的长城，艾普等。做为东南亚的经融中心，虽然网上传闻新加坡网络多快多快，可是在未到达新加坡本地体验之前，我们还是<em>太相信网络测评/拨测数据</em>（后面会提及实地测试数据）。</p>

<p>我们知道网站的速度一般由4部分组成，即：</p>

<ul>
<li><p>DNS响应速度</p></li>
<li><p>用户与机房的连接/下载速度（握手+业务处理+返回）</p></li>
<li><p>用户与静态资源CDN之间的下载速度</p></li>
<li><p>浏览器的渲染速度</p></li>
</ul>

<p>在DNS上，为减少不必要的根服务器询问次数和速度，DNS服务商应尽量选择海外提供商。我们使用webpagetest进行测试发现，在新加坡访问中国DNSPOD解析的域名，在未缓存下，向根寻址速度尽花了1s之多（zbjimg.com使用的是DNSPOD），而下图中googleApis的DNS却只有用了&lt;0.5s。</p>

<p><img src="img/sg-dns-test.png" alt="sg-dns-test"></p>

<p>在机房的选择上，要考虑与现有DEVOPS产品的对接，上线推送速度，运维远控稳定性，用户的访问速度和稳定性，与现有研发系统的整合性等因素综合判断。而CDN供应商的选择则强调节点对区域的覆盖度、稳定性；在浏览器渲染上，则强调布局设计的合理性和缓存的充分利用。</p>

<h3 id=">技术难点和解决方案</h3>

<h4 id=">如何精简化平台？</h4>

<p>这是面临的第一个难题。BJ经过十年的发展，现在内部研发团队和人员都比较多，整个系统复杂度、耦合度都非常高。内部在经历MVC(多团队维护一个项目)，THRIFT服务化（单团队多项目），DUBBO服务化，NODEJS大前端以后业务越来越高内聚，各个业务团队各显神通（JAVA、PHP、NODEJS、PYTHON多种语言共存），但是耦合一直是比较难的问题（有THRIFT协议、DUBBO协议、HTTP协议、MQ协议、SOCKET协议），上千个项目，各种协议相互依赖，依赖链路非常长，我们又缺乏比较完整的依赖链路管理工具。</p>

<p><img src="img/sg-pinpoint.png" alt="sg-pinpoint"></p>

<p><strong>我们需要从这个复杂的调用依赖网中抽离出一个简单的猪八戒网</strong>。这是给团队的第一个考验。</p>

<p>我们先跟产品经理们一起，对新平台的产品业务进行了一次梳理，针对每一个产品，我们都找到了它的入口项目。</p>

<ul>
<li>PHP web 入口项目</li>
<li>NODEJS web 入口项目</li>
<li>JAVA web 入口项目</li>
<li>THRIFT api 入口项目</li>
<li>JAVA api 入口项目</li>
<li>JAVA dubbo 入口项目</li>
<li>新建的项目</li>
</ul>

<p>然后，我们得到了一份新平台业务入口项目清单，类似如下 ：</p>

<table><thead>
<tr>
<th>产品名</th>
<th>所属团队</th>
<th>语言</th>
<th>入口项目</th>
</tr>
</thead><tbody>
<tr>
<td>登陆/注册</td>
<td>平台产品</td>
<td>NODEJS</td>
<td>nodejs-gj-login-web</td>
</tr>
<tr>
<td>交易</td>
<td>交易</td>
<td>PHP</td>
<td>php-jy-trade-web</td>
</tr>
</tbody></table>

<p>接下来，我们需要知道，每一个上面清单中的项目，在整个业务运行过程中，到底依赖了多少其它的项目？到底依赖了多少组件？到底查了多少个数据库、多少个表？</p>

<p>我们想要得到这样以下这个表格：</p>

<table><thead>
<tr>
<th>产品名</th>
<th>项目名</th>
<th>所属团队</th>
<th>语言</th>
<th>类型</th>
<th>被依赖次数</th>
<th>被依赖项目</th>
</tr>
</thead><tbody>
<tr>
<td>登陆/注册</td>
<td>nodejs-gj-login-web</td>
<td>平台产品</td>
<td>NODEJS</td>
<td>业务项目</td>
<td>0</td>
<td>-</td>
</tr>
<tr>
<td>数据库</td>
<td>zhubajie_member</td>
<td>运维</td>
<td>MYSQL</td>
<td>中间件</td>
<td>10010</td>
<td>trade</td>
</tr>
<tr>
<td>数据库</td>
<td>zhubajie_member</td>
<td>运维</td>
<td>MYSQL</td>
<td>中间件</td>
<td>13000</td>
<td>task</td>
</tr>
<tr>
<td>REDIS</td>
<td>REDIS</td>
<td>运维</td>
<td>REDIS</td>
<td>中间件</td>
<td>100320</td>
<td>task</td>
</tr>
<tr>
<td>REDIS</td>
<td>REDIS</td>
<td>运维</td>
<td>REDIS</td>
<td>中间件</td>
<td>103200</td>
<td>trade</td>
</tr>
<tr>
<td>用户服务化</td>
<td>java-dp-user-dubbo</td>
<td>平台产品</td>
<td>JAVA</td>
<td>业务项目</td>
<td>83</td>
<td>nodejs-gj-login-web</td>
</tr>
<tr>
<td>用户服务化</td>
<td>java-dp-user-dubbo</td>
<td>平台产品</td>
<td>JAVA</td>
<td>业务项目</td>
<td>21</td>
<td>trade</td>
</tr>
</tbody></table>

<h5 id="pinpoint">使用pinpoint梳理项目依赖关系</h5>

<p>在调用链路上面，由于公司在去年推行了所有的项目都接入pinpoint，所以我们就可以通过pinpoint查到相应的链路关系。于是我们就写了一个爬虫小脚本，根据pinpoint的http API，按项目名遍历查到这个项目在一个月以内，所有的依赖项目。</p>

<h5 id="devops-cmdb">与DEVOPS和CMDB信息打通知晓项目分布和资源</h5>

<p>通过小爬虫程序的归类，我们第一次对公司所有项目的依赖链路有了一个更加可视化的认识。我们知道了：</p>

<ul>
<li>公司的redis和mc的调用频率</li>
<li>哪些项目的环境命中率非常高</li>
<li>哪些项目直接访问数据库次数多少</li>
<li>哪些项目外部依赖项目达到近百个（耦合度高）</li>
</ul>

<p>再与DEVOPS和CMDB的项目信息库联动，我们就知道了每一个项目的准确信息、用途、负责人、资源预算等情况。</p>

<h5 id=">依赖人工排除</h5>

<p>在了解每一个项目的用途和依赖的接口名以后，我们就与产品经理一起，梳理哪些业务是我们需要的？哪些业务不是我们需要的，再使用排除法，这样我们就形成了一个精简版的平台项目清单和调用关系网络，接下来就是进入开发了。</p>

<h4 id=">对研发体系的考验</h4>

<p>由于我们需要把部分项目进行平台移植，那么挑战就来了：</p>

<ul>
<li>如何实现该项目与BJ平台的平行迭代而又不相互影响？</li>
<li>同一个项目如何在内部开发测试环境中支撑2个平台，跑着2套不一样的逻辑？</li>
</ul>

<p>虽然BJ内部架构已经走到了微服务的阶段，可是由于历史的原因，并不是所有业务都可以实现积木式组装，梳理调用链和依赖关系过后，进入研发这个阶段，才是难题的开始。</p>

<p>以交易系统为例子，BJ的交易服务化已经比较高，核心板块基本都是dubbo。可是两个平台的业务规则有差异，并且后期演变路径也会不一样。为了在测试环境仿真线上环境，我们需要新平台的测试环境的数据库、计划任务、消息等体系与BJ进行隔离，以免受BJ业务的污染和污染BJ的测试（毕竟BJ交易业务参与的团队非常之多，污染所带来的影响也比较大）。</p>

<p>我们想到了几个方案：</p>

<ul>
<li>1）使用dubbo version的方式在环境中对核心业务启动2份容器，注册到同一个ZK；</li>
<li>2）在DNS上针对MYSQL、MQ、REDIS做分流，在数据层进行无感知隔离，但是需要业务改造；</li>
<li>3）重建一个mini版的测试环境；</li>
</ul>

<p>方案1）需要所有的业务接入方dubbo call的地方支持version控制，java本身还比较好处理，可是还有大量的nodejs应用和php应用，这些应用的改造成本比较高；</p>

<p>方案2）运维改动难度不高，可是无法较好的支持长链接的情况，且业务本身要提供环境标签；</p>

<p>方案3）如果我们重建独立测试环境，也就是我们的开发环境、性能环境、预发布环境、灰度环境都要重建，成本比较高。</p>

<p>由于新平台涉及到的业务项目数量达到100+个之多，接下来我们针对方案1）方案2）都与各个业务团队进行了沟通和调研，大家反馈改动的时间成本太高，我们只有方案3）这个选择。但是方案3）成本太高，我们要想办法把成本降下来。</p>

<p>再次进入梳理的阶段，降成本就是也少机器，那就说需要内部有共享服务并可以支持2套业务。我们首先想到的就是固定不变的服务，如：配置中心，前端nginx负载均衡等可以按业务标识进行多向服务的产品。其次就是再次精简业务，对业务进行合并，把机器数量减少到最低，接下来就是把完整的业务在新环境进行重部署和流水线进行细微的改造。</p>

<h4 id=">多语言问题</h4>

<p>由于新平台是中英双语平台，而BJ平台系统并没有多语言的支持，也就是说我们需要对100+个业务系统增加多语言支持。为了实现用户一键切换语言以后，平台所有链路产品都要对标的按语言进行响应，我们需要一套全链路的语言透传方案。</p>

<h5 id=">多语言设计策略</h5>

<ol>
<li><p>源数据类（数据库）直接展示不做翻译，系统中硬编码的部分进行国际化处理；</p></li>
<li><p>国际化语言是可以扩展的、一次解决永久受益；</p></li>
<li><p>产品配置类由产品自身解决国际化问题；</p></li>
<li><p>国际化引起的时间、货币问题由业务自身解决；</p></li>
<li><p>最小侵入性；</p></li>
</ol>

<h5 id=">语言链路</h5>

<blockquote>
<p>前端选择语言/语言识别 (php/node.js存入cookie)—&gt;（dubbo call/html call带上cookie）—&gt;dubbo call dubbo(with language) —&gt; dubbo output(i18n) —&gt;php(18n) —&gt; js(i18n)</p>
</blockquote>

<p>我们的业务由NODEJS，PHP，JAVA共同组成，而多语言更多的是前端层的动作，在模板引擎上，我们有smarty、FIS、JS。所以我们需要提供4套多语言解决方案和透传方案。</p>

<h5 id="smarty">smarty的多语言解决方案</h5>

<p>我们使用<code>gettext</code>函数来支持多语言，同时在框架层增加语言识别插件，把语言注册为全局变量，这样不同的业务可以通过依赖我们提供的composer包增加多语言支持。</p>

<p>可问题是，老的PHP系统中，大量硬编码的文案以前都没有i18n的支持，也就是说<strong>我们需要把所有的PHP文件有文案的地方都增加i18n函数!!!</strong> 好吧，我们又要来慢慢梳理了。</p>

<p>我们需要把<code>&#39;文案&#39;</code> <code>&quot;文案&quot;</code> <code>&quot;[\u4e00-\u9fa5]&quot;</code> 这些所有包含中文文字的地方都修改一遍，都改为函数调用<code>i18n(&#39;文案&#39;)</code>。这完全是一个体力活，我们需要自动化的完成。所以我们写了一个扫描器，对所有中文都进行了替代。</p>

<p>完成以上操作以后，接下来就是语言字典的生成了。我们需要把系统中所有的中文提取出来，生成字典，交给翻译公司去操作。又到了编码时间，扫描器继续上场。</p>

<h5 id="java-nodejs-fis-js">JAVA、NODEJS、FIS、JS的多语言解决方案</h5>

<p>按以上的逻辑，对中文进行替代，生成字典，唯一不同的只是实现的方式和方法有差异而已。</p>

<h5 id=">语言透传</h5>

<p>在前端层，语言可以通过cookie透传，但是涉及到内部调用时就需要单独传递了。在PHP、NODEJS、JAVA上，我们分别针对调用的入口函数进行了语言处理。</p>

<ul>
<li><p>PHP调整curl入口，增加语言属性；</p></li>
<li><p>NODEJS在网关层增加语言属性；</p></li>
<li><p>JAVA在dubbo filter中增加语言属性，同时在provider的切面中识别语言属性；</p></li>
</ul>

<p>在语言透传以后，有些系统因为有缓存，在语言变化以后，依然命中了缓存，造成语言切换失效。这个时候就需要对原有的缓存KEY规则进行调整，这一点是需要注意的地方。</p>

<h4 id=">支付问题</h4>

<p>这主要是一个产品问题。可是国际化平台，可这也是国际化业务必然要遇到的大难题。不同的国家，有不同的法律和货币及外汇管理政策，要实现跨国贸易和交易业务，支付是必然要跨过的坎。</p>

<p>目前主流的跨国收单和结汇平台不太多，有的只收单，有的只结汇。BJ支付团队与新加坡团队共同努力，做了许多调研，考虑到汇损、结汇成本、收款周期、收单成本、扩展能力，最后才找到一路复杂的道路。</p>

<p>而对于支付引擎来说，要面对的是：</p>

<ul>
<li>与国际渠道的通讯稳定性；</li>
<li>多渠道支持能力；</li>
</ul>

<p>由于BJ有自己的支付引擎基础，这块对技术来说，问题不是太大。在这些工作都OK以后，接下来就是上百人的研发团队共同开发的问题了。</p>

<h4 id=">多团队协作高速研发</h4>

<p>100+个业务项目，10+个业务团队，近100人参与，目标时间是固定的，有的业务团队，还是多项目并行，我们需要一个非常完整的进度管控和问题解决、反馈机制。</p>

<p>还好BJ有SM角色和比较健全的项目管理流程。我们与SM一起，对项目节点进行拆分，通过大目标拆分为小目标，强力推行，建立问题高速解决通道等方式来推进目标达成。</p>

<h4 id="amp">海外平台稳定性&amp;速度问题</h4>

<p>在研发之初，我们对于跨国的网络访问没有关注太多，完全相信了拨测的数据。但是真实上线以后，我们却栽了一个大坑。</p>

<p>由于我们机房在中国，使用海外动态CDN加速回国。我们通过拨测平台对新加坡到机房的CDN动态加速，新加坡到CDN节点进行过测试，数据很不错。可是上线以后，我们却不停的收到反馈：</p>

<ul>
<li>网站怎么突然打不开了啊？</li>
<li>网站打开好慢啊</li>
<li>网站图片下载好慢</li>
<li>网站乱码</li>
</ul>

<p>而我们的监控平台上，却数据一直很正常，未收到任何的报警。我意识到，网络通讯上稳定有问题！于是我们在新加坡各个运营商的网络环境都对平台进做了一个真实环境的网络测试。</p>

<h5 id="cdn">CDN节点的连接测试</h5>

<blockquote>
<p>环境：新加坡LGA提供商</p>

<p>时间：2017-11-11 22：00- 2017-11-12 08：30</p>

<p>对象：CDN供应商</p>

<p>指标：下载完成时间</p>
</blockquote>

<p><img src="img/sg-network-test-lga.png" alt="sg-network-test-lga"></p>

<p>可以看出，请求1KB的JS文件，下载完成时间波动非常明显，甚至有超过4S的情况出现。我们更换myRepublic网络环境进行了测试，发现波动更加严重。在M1、starHub、SingTel上也是要稍微好一些。</p>

<p><img src="img/sg-network-test-myrepublic.png" alt="sg-network-test-myrepublic"></p>

<p>我们立即与CDN供应商进行了联系，供应商由于是中国企业，在新加坡的覆盖存在不足，所以只能做监控和手动处理。同时我们又立即与其它CDN供应商联系，再次进行实地稳定性测试，最终切换了CDN供应商。</p>

<h5 id=">海外动态加速供应商的测试</h5>

<p>在测试完CDN资源的速度和稳定性以后，我们又对动态加速做了一次真实的监控，整体比较平稳。可是后来，我们却监控到网站多次无法访问的情况，情况是连接被拒绝，而几秒以后又恢复，无规律反复出现。</p>

<p>这与G* F * W的行为比较相识啊。</p>

<p><strong>难道我们网站被墙了?</strong>中国出口网络是有关注的，难道海外出口网络也有？我们又更换了海外加速代理，但依然不定期的受到干扰。特别是中国会议期间，网站受影响非常严重， 这也让我们坚定了海外业务迁移海外机房的决心。</p>

<h4 id=">异地平台数据监控</h4>

<p>在完成各类数据实现测试和问题解决以后，我们迫切的需要一套用户端的行为监控。提前发现用户存在的问题并进行修复。</p>

<p>BJ内部由APM+ELK可以查阅到所有后端业务的异常，同时集成报警规则可以很快了解平台状态。但是在前端用户层的错误，我们却没有较好的监控机制，如某页面乱码、某个业务响应异常、页面渲染缓慢等。</p>

<p>接着，我们利用google analytics的事件机制，在js前端增加异常捕获，把前端浏览器错误全部提前到google来收集和分析。而渲染缓慢的问题，内部的UE平台刚好正在改造，配合google的渲染速度指标，我们可以有一个比较粗的了解。</p>

<p>然后，我们利用kibana，把日志进行了过滤，形成了一个简单的平台运行状态的报表，供所有同事查看。流量增长、业务出错都可以在30s左右直观了解到。</p>

<h4 id=">跨国产品研发协作</h4>

<p>总算平台上线运行正常了，团队也进入了有序的迭代周期。但是这个过程中，与新加坡团队的协作问题是值得一提的。新加坡是业务方，我们是产品技术方，如何有效的进行远程沟通，信息同步呢？比较幸运的是新加坡同事中文都比较好，使用中文沟通也基本没有什么问题。</p>

<p>为了避免信息遗漏，我们使用邮件+trello的方式做线上信息的整理和同步。</p>

<p>重要决定视频沟通，邮件记录。执行项目的过程和状态更新，使用trello进行记录，唯一不足是trello在中国的访问不太稳定。</p>

<p>在职能上，为提升项目在新加坡实地体验的质量，我们也在新加坡设立了UAT人员，产品流程增加新加坡UAT通过以后才发布上线。</p>

<h3 id=">关于团队和感想</h3>

<p>经历这次项目，团队在海外项目研发上积累了许多经验，同时在与其它团队的协作、与新加坡团队的协作表现得非常棒，为能与这样的团队共同战斗而荣幸。</p>

<p>感谢BJ，感谢各位与我们共同战斗的同事（田哥哥、局长、子豪、红阳、军哥哥、VV、小双、媛媛、盾哥）以及安全、运维、DEVOPS、SM、支付、测试等团队的大力配合。</p>

<p>部分同事更是努力学习英语，内部薄荷阅读、百词斩走红。</p>

  </article>
  
  <ul class="posts">
    <!-- <li class="listing-seperator">Yesterday you said tomorrow</li> -->
  
  
    
    
    
    <li class="listing-seperator"><a href="/archive/">Long ago</a></li>
  </ul>
</div>

            </div>
        </div>
        <footer class="site-footer">

    <div class="wrap">
        <div class="footer-col-1 column">
            <div class="github">
                <!-- <span class="icon github"> -->
                <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="#000" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                    c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                    c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                    c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                    C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                    c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                    c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                    c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                    c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
                <!-- </span> -->
            </div>
            <a href="https://github.com/daxiong">
                Fork me on github
            </a>
        </div>


        <div class="footer-col-2">
            <p>© 2014 - 2015 by <font style="color:#f44336">❤ </font> <a href="http://github.com/taizilongxu">Hackerxu</a></p>
        </div>
        <!-- <div class="footer-col-3 column">
      <p class="text">PHP,Python,Golang,Linux</p>
    </div> -->
    </div>
    <div class="scroll-top"><i class="fa fa-arrow-circle-up"></i></div>
</footer>


        <!-- mathjax -->
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
              tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
            });
        </script>
        <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <script type="text/javascript">
            var duoshuoQuery = {short_name:"cnstou"};
            (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:'
            ? 'https:' : 'http:') +
            '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
            ||
            document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        </script>
        <!-- top-scrooll -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.js"></script>
        <script type="text/javascript">
            $(window).scroll(function() {
                if($(this).scrollTop() > 100) {
                    $('.scroll-top').fadeIn(200);
                } else {
                    $('.scroll-top').fadeOut(200);
                }
            });
            $('.scroll-top').bind('click', function(e) {
                e.preventDefault();
                $('body,html').animate({scrollTop:0},200);
            });
        </script>
    </body>
</html>
